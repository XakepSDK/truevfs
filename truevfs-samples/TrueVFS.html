<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <link href="./css/prettify.css" type="text/css" rel="stylesheet"/>
    <script src="./js/prettify.js" type="text/javascript"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>TrueVFS Samples &#x2013; TrueVFS Command Line Utility</title>
    <style type="text/css" media="all">
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print"/>
    <meta name="author" content="Christian Schlichtherle"/>
    <meta name="Date-Revision-yyyymmdd" content="20180601"/>
    <meta http-equiv="Content-Language" content="en"/>
                      <script>
        (function() {
          var cx = '003580521944097984334:8uinm6tpaz4';
          var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
              '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
        })();
      </script>
                                                          
<link rel="alternate" href="http://truevfs.schlichtherle.de/category/announcements/feed/" type="application/rss+xml" title="The TrueZIP Blog - Announcements Feed"/>
                      
  </head>
  <body class="composite" onload="prettyPrint()">
    <div id="banner">
                    <div id="bannerLeft">
                TrueVFS Samples
                </div>
                                <div id="gcse-search-form" class="gcse-searchbox-only"></div>
            <div class="clear"><hr/></div>
    </div>
    <div id="breadcrumbs">
            
                                  <div class="xleft">
        <span id="projectVersion">Version: 0.12.0</span>
                  |                         <a href="../index.html" title="TrueVFS">TrueVFS</a>
      &raquo;
                            <a href="./" title="TrueVFS Samples">TrueVFS Samples</a>
      &raquo;
      TrueVFS Samples &#x2013; TrueVFS Command Line Utility
              </div>
            <div class="xright">        
                        </div>
      <div class="clear"><hr/></div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
              
                                                   <h5>Documentation</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="About">About</a>
            </li>
                  <li class="none">
            <strong>TrueVFS Command Line Utility</strong>
          </li>
          </ul>
                       <h5>Parent Module</h5>
                  <ul>
                  <li class="none">
                          <a href="../index.html" title="TrueVFS">TrueVFS</a>
            </li>
          </ul>
                       <h5>Sub-Modules</h5>
                                 <h5>Reports</h5>
                  <ul>
                                                                                                                                                                                                                                                                          <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                      <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                     
<form method="post" action="https://www.paypal.com/cgi-bin/webscr">
  <div class="paypalButton">
    <input name="cmd" type="hidden" value="_s-xclick"/>
    <input name="hosted_button_id" type="hidden" value="AGDEQWWKNZ6UL"/>
    <input src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online!" style="border: 0" type="image"/>
  </div>
</form>
                                
                              </div>
    </div>
    <div id="bodyColumn" class="content">
      <div id="contentBox">
                                      <div class="section">
<h2><a name="TrueVFS_Command_Line_Utility"></a>TrueVFS Command Line Utility</h2>
<p>The TrueVFS command line utility implemented by the class <a href="../apidocs/net/java/truevfs/samples/access/TrueVFS.html"><tt>net.java.truevfs.samples.access.TrueVFS</tt></a> showcases the features of the <a href="../truevfs-access/index.html">TrueVFS Access</a> API.</p>
<p>The TrueVFS command line utility allows you to work with entries in any archive file which is supported by an archive driver module on the class path like <a href="../truevfs-driver/truevfs-driver-zip/index.html">TrueVFS&#160;Driver&#160;ZIP</a>, <a href="../truevfs-driver/truevfs-driver-tar/index.html">TrueVFS&#160;Driver&#160;TAR</a>, <a href="../truevfs-driver/truevfs-driver-tar-gzip/index.html">TrueVFS&#160;Driver&#160;TAR.GZIP</a>, <a href="../truevfs-driver/truevfs-driver-tar-bzip2/index.html">TrueVFS&#160;Driver&#160;TAR.BZIP2</a> et al using Unix like commands like <tt>cat</tt>, <tt>cp</tt>, <tt>mv</tt>, <tt>rm</tt>, <tt>mkdir</tt>, <tt>mkdirs</tt>, <tt>ls</tt>, <tt>ll</tt> , <tt>llr</tt> , <tt>touch</tt> et al. You can use this utility to conveniently copy entire directory trees into an archive file or from an archive file or any other virtual or non-virtual directory.</p>
<div class="section">
<h3><a name="Setting_The_Stage"></a>Setting The Stage</h3>
<p>Before the examples are shown below, a little preparation is required in order to make it easier to start the utility class from the command line. With plain Java, you would have to start the utility class with a command like this:</p>
<div class="source">
<pre>$ java -jar truevfs-samples-0.12.0-standalone.jar %ARGS%</pre></div>
<p>Where <tt>%ARGS%</tt> is a variable for arbitrary command line arguments - see below. This example uses TrueVFS's <a href="../kick-start/no-maven.html">all-in-one JAR</a>.</p>
<p>However, on Windows we would like to use something like this instead:</p>
<div class="source">
<pre>$ truevfs %ARGS%</pre></div>
<p>This can be done by copying the following script file with the name <tt>truevfs.cmd</tt> in some directory on your <tt>%PATH%</tt>:</p>
<div class="source">
<pre>@echo off

rem set PROPS=-Djava.awt.headless=true
rem set PROPS=-Djava.util.logging.config.file=logging.properties
set JAR=%USERPROFILE%\.m2\repository\net\java\truevfs\truevfs-samples\0.12.0\truevfs-samples-0.12.0-standalone.jar

java %PROPS% -jar &quot;%JAR%&quot; %*</pre></div>
<p>On Unix/Linux, this should be a bash script with the name <tt>truevfs</tt> - I leave this as an exercise to you, however.</p></div>
<div class="section">
<h3><a name="Examples"></a>Examples</h3>
<p>Following are some examples using the TrueVFS command line utility class. If you need help with the available commands and options, just run the TrueVFS command line utility class without parameters and it will print some help on standard error output.</p>
<table border="1" class="bodyTable">
<tr class="a">
<th align="center">Command</th>
<th align="center">Description</th></tr>
<tr class="b">
<td align="left">$ <tt>truevfs ll truevfs-samples-0.12.0-standalone.jar</tt></td>
<td align="left">Prints a detailed listing of the contents of the root directory of the JAR file from which the tool is actually running.</td></tr>
<tr class="a">
<td align="left">$ <tt>truevfs llr truevfs-samples-0.12.0-standalone.jar</tt></td>
<td align="left">Prints a recursive long listing of the contents of the root directory of the JAR file from which the tool is actually running.</td></tr>
<tr class="b">
<td align="left">$ <tt>truevfs cp truevfs-samples-0.12.0-standalone.jar/net/java/truevfs/samples/access/TrueVFS.class archive.zip/TrueVFS.class</tt></td>
<td align="left">Copies the file entry <tt>net/java/truevfs/samples/access/TrueVFS.class</tt> from the distribution JAR into the ZIP file <tt>archive.zip</tt>.</td></tr>
<tr class="a">
<td align="left">$ <tt>truevfs rm archive.zip/net/java/truevfs/samples/access/TrueVFS.class</tt></td>
<td align="left">Removes the file entry <tt>TrueVFS.class</tt> from <tt>archive.zip/net/java/truevfs/samples/access</tt>.</td></tr>
<tr class="b">
<td align="left">$ <tt>truevfs rmr archive.zip/de</tt></td>
<td align="left">Recursively removes the directory entry <tt>de</tt> from <tt>archive.zip</tt>.</td></tr>
<tr class="a">
<td align="left">$ <tt>truevfs mkdir archive.zip/dir.zip</tt></td>
<td align="left">Creates the new ZIP file <tt>dir.zip</tt> in the existing ZIP file <tt>archive.zip</tt>. Remember that this API treats archive files like directories, so you can simply create a ZIP file by calling the mkdir() method on a File object.</td></tr>
<tr class="b">
<td align="left">$ <tt>truevfs mkdirs archive.zip/a/b.zip/c/d.zip</tt></td>
<td align="left">Creates the new directory <tt>a</tt> containing the new ZIP file <tt>b.zip</tt>, containing the new directory <tt>c</tt> containing the new ZIP file <tt>d.zip</tt> within the existing <tt>archive.zip</tt>.</td></tr>
<tr class="a">
<td align="left">$ <tt>truevfs rm archive.zip/a/b.zip/c/d.zip</tt></td>
<td align="left">Removes the empty ZIP file <tt>d.zip</tt>. Note that similar to regular directories, this succeeds on empty ZIP files only.</td></tr>
<tr class="b">
<td align="left">$ <tt>truevfs touch archive.zip</tt></td>
<td align="left">Updates the last modification time of the existing ZIP file <tt>archive.zip</tt> to the current time. Note that if the given file does not exist, it is created as a plain file - you cannot create ZIP files using this method (use mkdir instead).</td></tr>
<tr class="a">
<td align="left">$ <tt>truevfs mv archive.zip/TrueVFS.class .</tt></td>
<td align="left">Moves the entry <tt>TrueVFS.class</tt> from the ZIP file <tt>archive.zip</tt> to the current directory <tt>.</tt> .</td></tr></table>
<p><b>Note:</b> Although TrueVFS has been designed to provide optimum performance, the TrueVFS command line utility is a feature showcase which should not serve as a performance benchmark: The utility uses some optional archive drivers which are not normally used but provide extra safety and extra features at the price of performance, such as CRC-32 checking, scanning <tt>.exe</tt> files for self extracting ZIP files et al. Furthermore, the start up time of the JVM makes Java almost useless for short running command line utilities anyway.</p>
<p>Of course, you can substitute the <tt>.zip</tt> extension in the examples above with any other file type extension recognized by the archive drivers modules on the class path.</p>
<p>For example, if you would like to use RAES encrypted ZIP files you would simply name the extension <tt>.tzp</tt> in a path. So in order to copy the directory <tt>directory</tt> to a RAES encrypted ZIP file <tt>secure.tzp</tt>, you can run:</p>
<div class="source">
<pre>$ truevfs cp -r directory secure.tzp</pre></div>
<p>If you want to copy a plain file <tt>file</tt> instead, then run:</p>
<div class="source">
<pre>$ truevfs cp file secure.tzp/file</pre></div>
<div class="section">
<h4><a name="New_Options_for_ZIP_Files"></a>New Options for ZIP Files</h4>
<p>The <tt>cp</tt> command provides some options to control additional features as follows.</p>
<p>Use the following option in order to create a ZIP entry which is encrypted according to the <a class="externalLink" href="http://www.winzip.com/win/en/aes_info.htm">WinZip AES encryption</a> specification.</p>
<div class="source">
<pre>$ truevfs cp -encrypt file win.zip/file</pre></div>
<p>Use the following option in order to append a ZIP entry to the end of an existing ZIP file instead of updating the ZIP file. This might be useful if the ZIP file is pretty large compared to the single entry to add.</p>
<div class="source">
<pre>$ truevfs cp -grow file appended.zip/file</pre></div>
<p>Sometimes you might want to use the STORED method rather than the DEFLATED method when writing an entry to a ZIP file. There's an option for this, too:</p>
<div class="source">
<pre>$ truevfs cp -store file stored.zip/file</pre></div>
<p>For completeness, there's also an option to use the DEFLATED method. This is the default however, so you don't need to specify it:</p>
<div class="source">
<pre>$ truevfs cp -compress file compressed.zip/file</pre></div></div></div></div>
              </div>
    </div>
    <div class="clear"><hr/></div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2005-2018
                        <a href="http://schlichtherle.de">Schlichtherle IT Services</a>.
            All Rights Reserved.      
                                   <span id="publishDate">Last Published: 2018-06-01</span>
                        </div>
      <div class="clear"><hr/></div>
    </div>
  </body>
</html>
